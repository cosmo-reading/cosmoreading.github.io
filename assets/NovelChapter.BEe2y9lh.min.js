import {
    a7 as T,
    x as A,
    bJ as j,
    y as P,
    r as p,
    az as E,
    f as s,
    h,
    j as a,
    a8 as K,
    ac as D,
    bK as H,
    cb as M,
    cU as U,
    t as y,
    g as V,
    o as W
} from "./app.BSN4W8HM.min.js";
import {
    C as Y
} from "./chapters.client.BqFA7pYJ.min.js";
import {
    e as q,
    S as R
} from "./Tooltip.DXI-aTB-.min.js";
import {
    S as Z
} from "./useNovelStatus.BH42DY_K.min.js";
import {
    a as F
} from "./path.CF9Kc7wv.min.js";

function te({
    novel: e,
    chapterGroup: r,
    advance: t,
    enabled: i,
    suspense: n,
    ...c
}) {
    const {
        user: d
    } = T(), m = A(j, {
        novelId: e == null ? void 0 : e.id,
        filter: {
            isAdvanceChapter: t !== void 0 ? {
                value: t
            } : void 0,
            chapterGroupId: r && {
                value: r.id
            }
        }
    }), {
        data: l,
        status: u
    } = P(Y, o => o.getChapterList, m, ["chapterGroups", e == null ? void 0 : e.slug, d == null ? void 0 : d.id, r == null ? void 0 : r.id, t], {
        enabled: i,
        suspense: n,
        staleTime: 60 * 1e3,
        ...c
    });
    return {
        data: l == null ? void 0 : l.items,
        status: u
    }
}
var k;

function g() {
    return g = Object.assign ? Object.assign.bind() : function(e) {
        for (var r = 1; r < arguments.length; r++) {
            var t = arguments[r];
            for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        return e
    }, g.apply(this, arguments)
}
var I = function(r) {
    return p.createElement("svg", g({
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
    }, r), k || (k = p.createElement("path", {
        d: "M10 10.916a1.366 1.366 0 0 0-.917 2.392v1.274a.916.916 0 0 0 1.834 0v-1.274A1.366 1.366 0 0 0 10 10.916Zm4.583-3.667H7.25V5.416a2.75 2.75 0 0 1 4.693-1.953c.345.352.591.788.715 1.265a.918.918 0 0 0 1.779-.458 4.667 4.667 0 0 0-1.201-2.1 4.583 4.583 0 0 0-7.82 3.246v1.833a2.75 2.75 0 0 0-2.75 2.75v6.417a2.75 2.75 0 0 0 2.75 2.75h9.167a2.75 2.75 0 0 0 2.75-2.75V9.999a2.75 2.75 0 0 0-2.75-2.75Zm.917 9.167a.917.917 0 0 1-.917.916H5.417a.917.917 0 0 1-.917-.916V9.999a.917.917 0 0 1 .917-.917h9.166A.917.917 0 0 1 15.5 10v6.417Z",
        fill: "currentColor"
    })))
};
const J = ({
    to: e,
    from: r
}) => {
    const [t, i] = p.useState(!1), n = E();
    return p.useEffect(() => (t && n(e, {
        state: {
            from: r
        }
    }), () => {
        i(!1)
    }), [t, n, e, r]), {
        intercepted: t,
        intercept: c => {
            c.preventDefault(), i(!0)
        }
    }
};

function _({
    publishedDate: e,
    isOwned: r,
    advanced: t,
    shouldPayKarma: i,
    karmaPrice: n
}) {
    return s("div", {
        className: h("font-set-r13 flex items-center text-gray-desc group-visited:text-gray-350 dark:group-visited:text-gray-750"),
        children: [a("span", {
            children: t ? "Early access chapter" : e && K(e).format("YYYY.MM.DD")
        }), r ? s("div", {
            className: "flex",
            children: [a(w, {}), a("div", {
                className: "font-set-m13",
                children: "Owned"
            })]
        }) : i && n ? s("div", {
            className: "flex items-center",
            children: [a(w, {}), a(q, {
                className: "h-[11px] w-[11px] text-gray-400"
            }), a("span", {
                className: "font-set-sb13 ml-[3px] text-gray-600 dark:text-gray-400",
                children: n
            })]
        }) : null]
    })
}
const w = () => a("div", {
    className: "w-[10px] text-center",
    children: "Â·"
});

function ae({
    classes: e,
    novelSlug: r,
    chapter: t,
    status: i,
    onClickItem: n,
    itemId: c,
    renderedFrom: d
}) {
    var x, f;
    const {
        slug: m,
        name: l
    } = t, u = D(t.whenToPublish ? ? t.publishedAt) ? ? void 0, o = t.spoilerTitle, {
        isAdvancedChapter: N
    } = H(t), b = ["lockedByKarma", "lockedByLastHoldBack", "lockedByWtu"].includes(i), C = (f = (x = t.karmaInfo) == null ? void 0 : x.karmaPrice) == null ? void 0 : f.value, B = i === "unlockedByOwned", v = F({
        novelSlug: r,
        chapterSlug: m
    }), {
        intercepted: S,
        intercept: L
    } = J({
        to: v,
        from: d
    });
    return a(W, {
        to: v,
        onClick: O => {
            L(O), n == null || n()
        },
        className: "group",
        "data-amplitude-click-event": M.ClickChapter,
        "data-amplitude-params": JSON.stringify(U(t)),
        children: s("div", {
            id: c,
            className: y(h("flex pt-[12px] pb-[10px] md:last-of-type:border-b-0 with-hover:hover:bg-black/[.04] with-hover:hover:dark:bg-white/[.08]", {
                "bg-black/[.04] dark:bg-white/[.08]": S
            }), e == null ? void 0 : e.root),
            children: [s("div", {
                className: "flex-1",
                children: [s("div", {
                    className: h("font-set-sb16 group-visited:text-gray-400 dark:group-visited:text-gray-600", y("text-gray-800 line-clamp-1 dark:text-white", e == null ? void 0 : e.title)),
                    children: [!o && a("span", {
                        children: l
                    }), o && s(V, {
                        children: [a("span", {
                            className: "text-spoiler",
                            children: l
                        }), " (Spoiler Title)"]
                    })]
                }), a("div", {
                    className: "mt-[4px]",
                    children: a(_, {
                        publishedDate: u,
                        isOwned: B,
                        advanced: N,
                        shouldPayKarma: b,
                        karmaPrice: C
                    })
                })]
            }), a("div", {
                className: "ml-[4px] flex items-center",
                role: "status",
                children: a(z, {
                    status: i
                })
            })]
        })
    })
}
const z = ({
    status: e
}) => e === "lockedByKarma" || e === "lockedByLastHoldBack" || e === "lockedByAdvanced" ? a("div", {
    title: "locked",
    children: a(R, {
        className: "h-[18px] w-[18px] text-gray-400 dark:text-gray-500"
    })
}) : e === "lockedByWtu" ? a("div", {
    title: "wait",
    children: a(Z, {
        className: "h-[18px] w-[18px] text-gray-400"
    })
}) : e === "unlockedByVip" || e === "unlockedByChampion" ? a("div", {
    title: "unlocked",
    children: a(I, {
        className: "h-[18px] w-[18px] text-blue-500"
    })
}) : null;
export {
    ae as N, te as u
};
//# sourceMappingURL=NovelChapter.BEe2y9lh.min.js.map