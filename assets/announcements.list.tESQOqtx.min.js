import {
    a5 as b,
    a6 as A,
    f as o,
    j as a,
    aj as P,
    b3 as y,
    r as i,
    h as k,
    S as w,
    bP as g,
    x as S,
    y as I,
    ao as R,
    g as N
} from "./app.BSN4W8HM.min.js";
import {
    a as T,
    N as j
} from "./novel_announcements.client.nMeqcv8h.min.js";
import {
    U as F
} from "./UserFlairBadge.D4YxxncA.min.js";
import {
    a as W
} from "./index.D8jIUvOW.min.js";

function q({
    announcement: e,
    ...t
}) {
    var s, l, m, d;
    const n = b(A(e.timePublished), {
        refreshInterval: 0
    });
    return o("div", { ...t,
        children: [a(P, {
            className: "text-[14px] text-gray-t0",
            color: "inherit",
            href: `/announcements/${(s=e.novelInfo)==null?void 0:s.slug}/${e.slug}`,
            children: e.title
        }), o("div", {
            className: "flex text-[14px]",
            children: [a("div", {
                className: "text-[#888888]",
                children: "by"
            }), o("div", {
                className: "ml-[5px] flex flex-1 items-center break-word",
                children: [a("span", {
                    className: "mr-[5px] text-[#666666] dark:text-[#999999]",
                    children: (l = e.poster) == null ? void 0 : l.userName
                }), a(F, {
                    flair: (d = (m = e.poster) == null ? void 0 : m.flair) == null ? void 0 : d.value
                })]
            })]
        }), a(y, {
            color: "#888",
            fontSize: "13px",
            children: n
        })]
    })
}
const x = i.memo(function({
        className: t,
        ...n
    }) {
        return a(w, {
            className: k("bg-transparent bg-gradient-to-r from-[#fbfbfb] to-[#f6f6f6] dark:from-[#333] dark:to-[#2a2a2a]", t),
            ...n
        })
    }),
    C = i.memo(function({
        count: t = 4
    }) {
        return a("div", {
            className: "mt-[8px] flex flex-col space-y-[20px]",
            children: Array(t).fill(null).map((n, s) => o(i.Fragment, {
                children: [o("div", {
                    children: [a(x, {
                        className: "mb-[6px] h-[20px] w-[80%] sm:w-[70%]",
                        variant: "rectangular",
                        animation: "wave"
                    }), a(x, {
                        className: "h-[20px] w-[74px]",
                        variant: "rectangular",
                        animation: "wave"
                    })]
                }), a(g, {
                    className: "last:hidden"
                })]
            }, s))
        })
    });

function D({
    children: e
}) {
    return a(N, {
        children: e
    })
}

function G({
    novel: e,
    count: t,
    pagination: n
}) {
    var u, h;
    const s = i.useRef(null),
        [l, m] = i.useState(1),
        d = S(T, {
            novelSelector: e != null && e.id ? {
                oneofKind: "novelId",
                novelId: e.id
            } : void 0,
            pageInfo: {
                page: l,
                count: t
            }
        }),
        {
            data: r
        } = I(j, c => c.getNovelAnnouncements, d, ["novel-news", e == null ? void 0 : e.id, l, t], {
            staleTime: 1e3 * 60 * 5,
            suspense: !0,
            keepPreviousData: !0,
            showModalOnError: n ? !0 : void 0
        }),
        f = i.useMemo(() => {
            var c;
            return Math.ceil((((c = r == null ? void 0 : r.pageInfo) == null ? void 0 : c.total) || 0) / t)
        }, [(u = r == null ? void 0 : r.pageInfo) == null ? void 0 : u.total, t]),
        v = i.useCallback(async (c, p) => {
            m(p), s.current && await W(s.current, {
                maxDuration: 500,
                verticalOffset: -150
            })
        }, []);
    return o(N, {
        children: [a("div", {
            ref: s
        }), o("div", {
            className: "mt-[8px] flex flex-col space-y-[20px]",
            children: [(h = r == null ? void 0 : r.items) == null ? void 0 : h.map((c, p) => o(i.Fragment, {
                children: [a(q, {
                    announcement: c
                }), p < r.items.length - 1 && a(g, {})]
            }, p)), (r == null ? void 0 : r.items.length) == 0 && a("div", {
                className: "my-[20px]",
                children: "No announcements yet! Keep watching this space for latest announcements."
            })]
        }), n && f > 0 && a("div", {
            className: "mt-[32px]",
            children: a(R, {
                count: f,
                page: l,
                onChange: v
            })
        })]
    })
}

function M({
    novel: e,
    announcementsCount: t,
    wrapperComponent: n,
    ...s
}) {
    const l = n || D;
    return a(i.Suspense, {
        fallback: a(l, {
            novel: e,
            children: a(C, {
                count: t
            })
        }),
        children: a(l, {
            novel: e,
            loaded: !0,
            children: a(G, {
                novel: e,
                count: t,
                ...s
            })
        })
    })
}
M.defaultProps = {
    announcementsCount: 10,
    pagination: !1,
    hideWhenNoAnnouncements: !1
};
export {
    M as N
};
//# sourceMappingURL=announcements.list.tESQOqtx.min.js.map