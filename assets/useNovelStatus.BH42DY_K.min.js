import {
    r as o,
    cZ as y,
    P as q,
    an as $,
    d2 as J,
    d3 as X,
    f as _,
    j as t,
    aB as Y,
    g as j,
    t as N,
    a8 as R,
    ac as C,
    h as S,
    bF as ee,
    au as te,
    Q as re,
    R as ie,
    p as ae
} from "./app.BSN4W8HM.min.js";
import {
    A as x
} from "./styles.-VfZxx2n.min.js";
import {
    B as ne,
    S as oe
} from "./BlurComponent.pu8JV-U7.min.js";
var O;

function F() {
    return F = Object.assign ? Object.assign.bind() : function(e) {
        for (var r = 1; r < arguments.length; r++) {
            var u = arguments[r];
            for (var s in u) Object.prototype.hasOwnProperty.call(u, s) && (e[s] = u[s])
        }
        return e
    }, F.apply(this, arguments)
}
var se = function(r) {
    return o.createElement("svg", F({
        width: 20,
        height: 20,
        viewBox: "0 0 20 20",
        fill: "none",
        xmlns: "http://www.w3.org/2000/svg"
    }, r), O || (O = o.createElement("path", {
        fillRule: "evenodd",
        clipRule: "evenodd",
        d: "M17.333 10c0 .73-.106 1.433-.304 2.098l1.485.828A8.989 8.989 0 0 0 19 10h-1.667ZM10 1a8.99 8.99 0 0 1 7.404 3.882L19 3.286V8h-4.714L16.2 6.084a7.333 7.333 0 1 0-7.19 11.183v1.68A9.001 9.001 0 0 1 10 1Zm3.921 17.103a8.94 8.94 0 0 1-2.919.842v-1.68a7.285 7.285 0 0 0 2.056-.598l.863 1.436Zm3.767-3.421a9.046 9.046 0 0 1-1.993 2.287l-.841-1.472a7.369 7.369 0 0 0 1.382-1.636l1.452.82Zm-6.855-8.11H9.167v5.547H13v-1.666h-2.167V6.572Z",
        fill: "currentColor"
    })))
};

function ce({
    blurHash: e,
    style: r,
    src: u,
    alt: s,
    fallbackImage: f,
    width: g,
    height: a,
    srcWidth: k,
    srcHeight: B,
    blurHashOptions: c,
    className: A,
    innerClassName: l,
    priority: P,
    quality: i,
    sizes: E,
    layout: h,
    lazy: b,
    unoptimized: d,
    ...m
}) {
    h = h || (E ? "responsive" : "intrinsic");
    const {
        width: H,
        height: W,
        punch: Z
    } = c || {
        width: ue,
        height: de
    }, [D, U] = q({
        triggerOnce: !0,
        skip: T
    }), [w, v] = o.useState(T || !y()), [I, V] = o.useState(!1), G = o.useCallback(() => {
        v(!0)
    }, []), Q = p => {
        o.startTransition(() => {
            p && !p.complete ? v(!1) : p != null && p.complete && v(!0)
        })
    }, K = o.useCallback(() => {
        $(() => {
            v(!0), V(!0)
        })
    }, []), L = U || w || T || !y();
    let n = J({
        src: u ? ? f,
        layout: h,
        quality: i ? ? 75,
        width: X(g),
        unoptimized: d ? ? !1
    });
    return L || (n = le), I && (n.src = f), _(j, {
        children: [P ? t(Y, {
            children: t("link", {
                rel: "preload",
                as: "image",
                href: n.src,
                imageSrcSet: n.srcSet,
                imageSizes: n.sizes
            }, "__nimg-" + n.src + n.srcSet + n.sizes)
        }) : null, t("div", {
            ref: D,
            ...m,
            className: A,
            style: {
                willChange: "auto"
            },
            children: L && !I ? _(j, {
                children: [t("img", {
                    ref: Q,
                    style: { ...r,
                        display: L ? "inline-block" : "none"
                    },
                    width: g,
                    height: a,
                    className: N(x, "overflow-hidden whitespace-nowrap object-cover indent-[100%]", l),
                    onLoad: G,
                    onError: K,
                    alt: s,
                    loading: b ? "lazy" : void 0,
                    ...n
                }), !w && e ? t(ne, {
                    entry: {
                        hash: e,
                        options: {
                            height: W,
                            width: H,
                            punch: Z
                        }
                    },
                    width: g || k,
                    height: a || B,
                    fitsToParent: !0
                }) : w ? null : t(z, {
                    className: l
                })]
            }) : I || !w && !e ? t(z, {
                className: l
            }) : void 0
        })]
    })
}
const ue = 16,
    de = 16,
    T = y() && "loading" in document.createElement("img"),
    le = {
        src: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        srcSet: void 0,
        sizes: void 0
    },
    z = ({
        className: e
    }) => t("div", {
        className: N("dark:bg-gray-850 absolute top-0 left-0 h-full w-full bg-[#e6e6e6]", e),
        children: t(oe, {
            className: "scale-[0.3] fill-current text-white",
            width: "100%",
            height: "100%"
        })
    });
M.defaultProps = {
    showRotation: !0
};

function M({
    novel: e,
    imgUrl: r,
    imgBlurHash: u,
    isLoading: s,
    srcWidth: f,
    srcHeight: g,
    classes: a,
    showRotation: k = !0,
    children: B
}) {
    var A, l;
    const c = o.useMemo(() => {
        var b;
        const i = (((b = e == null ? void 0 : e.series) == null ? void 0 : b.activePricingModels.flatMap(d => d.rotations.map(m => ({
            pricing: d,
            rotation: m
        })))) || []).find(d => {
            var m;
            return d.rotation.id === ((m = d.pricing.currentRotationId) == null ? void 0 : m.value)
        });
        if (!i) return null;
        const E = !!i.pricing && i.pricing.pricing.oneofKind === "free",
            h = R().isBetween(R(C(i.rotation.startTime)), R(C(i.rotation.endTime)));
        return {
            isFreeRotation: E,
            isActive: h,
            rotation: i == null ? void 0 : i.rotation
        }
    }, [e]);
    return t("div", {
        children: _(te, {
            item: !s,
            className: S(x, "max-w-none rounded-[6px] bg-[#e9e9e9] dark:bg-[#2a2a2a]"),
            skeletonProps: ee,
            children: [!s && t(ce, {
                alt: e == null ? void 0 : e.name,
                srcWidth: f,
                srcHeight: g,
                src: r ? ? ((A = e == null ? void 0 : e.coverUrl) == null ? void 0 : A.value),
                blurHash: u ? ? ((l = e == null ? void 0 : e.coverBlurHash) == null ? void 0 : l.value),
                innerClassName: N("self-center", a == null ? void 0 : a.img)
            }), k && (c == null ? void 0 : c.isFreeRotation) !== void 0 && (c == null ? void 0 : c.isFreeRotation) === !0 && t("div", {
                className: "absolute top-0 right-0 w-[40%]",
                children: t("img", {
                    alt: "Free",
                    src: "/images/free-blue.png",
                    className: "drop-shadow-[3px_5px_2px_rgba(0,0,0,0.6)]"
                })
            }), t("div", {
                className: N(x, "bg-skins-bookcover", a == null ? void 0 : a.bookCover)
            }), t("div", {
                style: {
                    backgroundImage: "url('/images/Bookcover@3x.png')",
                    backgroundSize: "100% 100%"
                },
                className: x
            }), B]
        })
    })
}
const me = ({
        classes: e
    }) => t("div", {
        className: S("absolute", e == null ? void 0 : e.root),
        children: t("div", {
            className: S("rounded-4 flex items-center justify-center bg-black", e == null ? void 0 : e.box),
            children: t(se, {
                className: S("text-white", e == null ? void 0 : e.icon)
            })
        })
    }),
    ge = ({
        rank: e
    }) => {
        const r = re(ie.downMd);
        return t("img", {
            className: "absolute -bottom-2 -left-2",
            src: `/images/ranking-number-${e+1}@3x.png`,
            alt: "rank number",
            width: r ? 48 : 68,
            height: r ? 34 : 48
        })
    };
M.WtuBadge = me;
M.Rank = ge;

function Ae({
    novel: e
}) {
    return o.useMemo(() => ae(e), [e])
}
export {
    M as N, se as S, Ae as u
};
//# sourceMappingURL=useNovelStatus.BH42DY_K.min.js.map